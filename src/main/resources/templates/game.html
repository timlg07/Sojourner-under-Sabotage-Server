<!DOCTYPE html>
<html lang="en-us" xmlns:sec="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Sojourner under Sabotage | Unity WebGL Player</title>
    <link rel="stylesheet" th:href="@{unity/TemplateData/style.css}">
    <link rel="stylesheet" th:href="@{css/base.css}">
    <link rel="stylesheet" th:href="@{css/game.css}">

    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/images/favicon/site.webmanifest">
    <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/images/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
    <meta name="theme-color" content="#000000">
  </head>
  <body>
    <div id="objective" class="off-viewport-info">
      <div class="hover-content"></div>
      <div class="visible-content"></div>
    </div>
    <div id="survey" class="off-viewport-info">
      <nav class="hover-content">
        <a th:href="@{/survey}" th:if="${showSurvey}" target="_blank" rel="noopener"><strong>Survey</strong></a>
        <a th:href="@{/reset}" id="reset-game-button">Reset</a>
        <a th:href="@{/logout}" id="logout-button">Logout</a>
      </nav>
      <div class="visible-content"><span th:remove="tag" sec:authentication="name"></span></div>
    </div>
    <div id="popup" aria-hidden="true">
      <h1 class="heading">Welcome to Sojourner under Sabotage</h1>
      <div class="content"></div>
      <div class="button-bar">
        <button class="button" id="continue-button">Let's start!</button>
      </div>
    </div>
    <div id="ui-overlay" aria-hidden="true">
      <div class="ui-overlay-layout">
        <div id="button-bar" class="button-bar">
          <button id="editor-execute-btn" class="button clr-success" title="Run [F10] - Execute the tests (right editor) on the class (left editor)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
              <path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/>
            </svg>
            Run
          </button>

          <button id="editor-activate-test-btn" class="button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="activate-icon">
              <path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="coverage-icon hidden">
              <path d="M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0zm0 66.8l0 378.1C394 378 431.1 230.1 432 141.4L256 66.8s0 0 0 0z"/>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="error-icon hidden">
              <path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/>
            </svg>
            <span class="text">Activate Test</span>
          </button>

          <button id="editor-reset-cut-btn" class="button" title="Resets your changes of the class under test (left)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path d="M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"/>
            </svg>
            Reset class
          </button>

          <span id="editor-status-text"></span>

          <button id="editor-close-btn" class="button" title="[ESC] Close editor">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
              <path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/>
            </svg>
            Close
          </button>
        </div>
        <div class="editor-side-by-side-view">
          <div class="monaco-editor-container" id="monaco-container-debug"></div>
          <div class="monaco-editor-container" id="monaco-container-test"></div>
        </div>
        <div id="execution-result"></div>
      </div>
    </div>
    <div id="unity-container">
      <canvas id="unity-canvas" width=1080 height=720 tabindex="-1"></canvas>
      <div id="unity-loading-bar">
        <div id="unity-logo"></div>
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
      <div id="unity-warning"> </div>
      <div id="unity-footer">
        <div id="unity-webgl-logo"></div>
        <div id="unity-fullscreen-button"></div>
        <div id="unity-build-title">SojournerUnderSabotage</div>
      </div>
    </div>
    <div id="alarm"></div>
    <script th:inline="javascript">
      var buildUrl = /*[[@{/unity/Build}]]*/ "Build";
    </script>
    <script th:src="@{/js/unity.js}"></script>
    <script th:src="@{/webpack/main.bundle.js}"></script>
    <script th:inline="javascript">
      window.token = /*[[${@jwtTokenSupplier.getJwtToken().orElse("")}]]*/ '';
      window.userId = /*[[${@userService.getCurrentUserId().get()}]]*/ '';
      window.csrfHeader = {
        /*[[${_csrf.headerName}]]*/ ''
        : /*[[${_csrf.token}]]*/ ''
      };
    </script>
    <script th:src="@{/js/ws.js}"></script>
    <script th:src="@{/js/popup.js}"></script>
    <script th:src="@{/js/settings.js}"></script>
    <script th:src="@{/js/objective.js}"></script>
    <script th:src="@{/js/game.js}"></script>
  </body>
</html>
